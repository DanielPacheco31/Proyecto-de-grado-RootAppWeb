{% extends "core/base.html" %}
{% load static %}

{% block title %}Pago M√≥vil - ROOT{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/pagos.css' %}">
{% endblock %}

{% block content %}
<section id="pago-movil" class="checkout-section">
    <div class="container">
        <h2>Pago M√≥vil con Nequi</h2>
        
        {% if messages %}
        <div class="mensaje-container">
            {% for message in messages %}
            <div class="mensaje {% if message.tags %}{{ message.tags }}{% endif %}">
                {{ message }}
            </div>
            {% endfor %}
        </div>
        {% endif %}
        
        <div class="pago-movil-container">
            <div class="metodo-info">
                <div class="metodo-icon">üì±</div>
                <div class="metodo-nombre">Nequi</div>
                <div class="metodo-descripcion">Pago r√°pido y seguro desde tu celular</div>
            </div>
            
            <div class="resumen-pago">
                <div class="resumen-item">
                    <div class="resumen-label">N√∫mero de orden:</div>
                    <div class="resumen-valor">#{{ pago.compra.id }}</div>
                </div>
                
                <div class="resumen-item">
                    <div class="resumen-label">Fecha:</div>
                    <div class="resumen-valor">{{ pago.fecha_creacion|date:"d/m/Y H:i" }}</div>
                </div>
                
                <div class="resumen-total">
                    <div>Total a pagar:</div>
                    <div>${{ pago.monto|floatformat:2 }}</div>
                </div>
            </div>
            
            <div class="instrucciones">
                <h3>üìã Instrucciones de pago</h3>
                
                <ol class="pasos-lista">
                    <li>Abre tu aplicaci√≥n de Nequi en tu celular.</li>
                    <li>Selecciona la opci√≥n "Pagar" y luego "Usando c√≥digo QR".</li>
                    <li>Escanea el c√≥digo QR que aparece a continuaci√≥n.</li>
                    <li>Verifica que el monto sea de ${{ pago.monto|floatformat:2 }} y confirma el pago.</li>
                    <li>Una vez realizado el pago, ingresa el n√∫mero de tel√©fono usado para Nequi.</li>
                </ol>
            </div>
            
            <div class="qr-code">
                <div style="width: 180px; height: 180px; background: linear-gradient(135deg, #f0f0f0, #e0e0e0); display: flex; align-items: center; justify-content: center; border-radius: 12px; box-shadow: 0 4px 12px rgba(0, 102, 255, 0.15);">
                    <span style="font-size: 48px;">üì±</span>
                </div>
                <div class="qr-code-texto">
                    Escanea este c√≥digo QR con tu app de Nequi para realizar el pago
                </div>
            </div>
            
            <form method="post">
                {% csrf_token %}
                
                <div class="form-group">
                    <label for="numero_telefono">üìû N√∫mero de tel√©fono usado para el pago</label>
                    <input type="tel" id="numero_telefono" name="numero_telefono" placeholder="3XX XXX XXXX" required>
                </div>
                
                <div class="info-adicional">
                    <h4>‚ú® Informaci√≥n importante</h4>
                    <p>Una vez confirmado tu pago, recibir√°s un correo electr√≥nico con los detalles de tu compra y la factura electr√≥nica.</p>
                </div>
                
                <div class="acciones-pago">
                    <a href="{% url 'pagos:seleccionar_metodo_pago' pago.compra.id %}" class="btn-volver">‚Üê Volver</a>
                    <button type="submit" class="btn-confirmar">Confirmar Pago ‚Üí</button>
                </div>
            </form>
        </div>
    </div>
</section>
{% endblock %}